# Phase 5: shadcn/ui Setup

**Status:** Pending
**Ticket:** SCON-26

## Summary

Create `components.json` to configure the shadcn/ui CLI, then install all shadcn components needed for the current scope: `button`, `card`, `input`, `label`, and `switch`. Installing `button` and `card` first verifies the full pipeline works (CSS variables resolve, path aliases correct, TypeScript compiles). The remaining three are required by Phase 8's license form.

## Files Created

- `components.json` — shadcn/ui CLI configuration
- `resources/js/components/ui/button.tsx` — generated by CLI
- `resources/js/components/ui/card.tsx` — generated by CLI
- `resources/js/components/ui/input.tsx` — generated by CLI
- `resources/js/components/ui/label.tsx` — generated by CLI
- `resources/js/components/ui/switch.tsx` — generated by CLI

## `components.json`

```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "resources/css/globals.css",
    "baseColor": "zinc",
    "cssVariables": true
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  }
}
```

### Field explanations

| Field | Value | Reason |
|---|---|---|
| `style` | `new-york` | Tighter spacing, `rounded-sm` default. More refined look suited to a plugin admin UI. |
| `rsc` | `false` | Not a Next.js project. React Server Components are not used. |
| `tsx` | `true` | All components use `.tsx` extension. |
| `tailwind.config` | `""` | Tailwind v4 has no `tailwind.config.js`. Leave empty. |
| `tailwind.css` | `"resources/css/globals.css"` | The CLI injects CSS variable declarations here when components are installed. |
| `tailwind.baseColor` | `"zinc"` | Sets the neutral palette. Matches the zinc OKLCH tokens in `globals.css`. |
| `tailwind.cssVariables` | `true` | Components reference CSS variables (`bg-primary`) instead of hardcoded colors. |

## Commands

```bash
bunx --bun shadcn@latest add button
bunx --bun shadcn@latest add card
bunx --bun shadcn@latest add input
bunx --bun shadcn@latest add label
bunx --bun shadcn@latest add switch
```

> **`--bun` flag is required.** Without it, `bunx` may fall back to Node.js, causing compatibility issues with `bun.lock`.

After each command, the CLI may inject CSS variable blocks into `resources/css/globals.css`. Review the diff and remove any variables that are already declared in Phase 3. Variables not already present (e.g. a new `--destructive-foreground`) should be kept.

## What the Generated Components Look Like

### `resources/js/components/ui/button.tsx` (CLI-generated — do not pre-create)

```typescript
import { Slot } from "radix-ui"
import { cva, type VariantProps } from "class-variance-authority"
import { cn } from "@/lib/utils"

const buttonVariants = cva(
    "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0",
    {
        variants: {
            variant: {
                default:     "bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",
                destructive: "bg-destructive text-white shadow-xs hover:bg-destructive/90",
                outline:     "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",
                secondary:   "bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",
                ghost:       "hover:bg-accent hover:text-accent-foreground",
                link:        "text-primary underline-offset-4 hover:underline",
            },
            size: {
                default: "h-9 px-4 py-2 has-[>svg]:px-3",
                sm:      "h-8 rounded-md gap-1.5 px-3",
                lg:      "h-10 rounded-md px-6",
                icon:    "size-9",
            },
        },
        defaultVariants: { variant: "default", size: "default" },
    }
)

export interface ButtonProps
    extends React.ButtonHTMLAttributes<HTMLButtonElement>,
        VariantProps<typeof buttonVariants> {
    asChild?: boolean
}

export function Button({ className, variant, size, asChild = false, ...props }: ButtonProps) {
    const Comp = asChild ? Slot : "button"
    return <Comp className={cn(buttonVariants({ variant, size, className }))} {...props} />
}
```

### `resources/js/components/ui/card.tsx` (CLI-generated — do not pre-create)

```typescript
import { cn } from "@/lib/utils"

function Card({ className, ...props }: React.ComponentProps<"div">) {
    return (
        <div
            className={cn(
                "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",
                className
            )}
            {...props}
        />
    )
}

function CardHeader({ className, ...props }: React.ComponentProps<"div">) {
    return <div className={cn("flex flex-col gap-1.5 px-6", className)} {...props} />
}

function CardTitle({ className, ...props }: React.ComponentProps<"div">) {
    return <div className={cn("leading-none font-semibold", className)} {...props} />
}

function CardDescription({ className, ...props }: React.ComponentProps<"div">) {
    return <div className={cn("text-muted-foreground text-sm", className)} {...props} />
}

function CardContent({ className, ...props }: React.ComponentProps<"div">) {
    return <div className={cn("px-6", className)} {...props} />
}

function CardFooter({ className, ...props }: React.ComponentProps<"div">) {
    return <div className={cn("flex items-center px-6", className)} {...props} />
}

export { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter }
```

## Decisions

- All shadcn components needed for the current scope are installed here (`button`, `card`, `input`, `label`, `switch`) so that Phase 8 has no shadcn setup step and focuses entirely on component creation. `button` and `card` also serve as pipeline verification.
- CLI-generated files in `components/ui/` may reference the `React` namespace (e.g. `React.ButtonHTMLAttributes`) without an explicit import. This is intentional and works because `@types/react` is globally available via `@wordpress/scripts`. Do not alter these files to comply with the "import from `@wordpress/element`" rule — that rule applies to application code only, not to `ui/` components.
- The CLI generates the actual files — do not manually pre-create them, as the CLI may update CSS variables or add peer dependency imports that differ from hand-written versions.
- `radix-ui` v1 (umbrella package) provides all Radix primitives used by shadcn components (`Slot`, `Dialog`, etc.) without needing individual `@radix-ui/*` installs.

## Verification

```bash
bun run build:dev   # must succeed with no errors
bun run typecheck   # must exit 0
```

Confirm all five component files exist in `resources/js/components/ui/`: `button.tsx`, `card.tsx`, `input.tsx`, `label.tsx`, `switch.tsx`.

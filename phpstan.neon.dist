# Configuration for PHPStan
# https://phpstan.org/config-reference

includes:
	- phpstan-baseline.neon
	# @see https://github.com/phpstan/phpstan-src/blob/master/conf/bleedingEdge.neon
	- phar://phpstan.phar/conf/bleedingEdge.neon
	# Include this extension
	- vendor/szepeviktor/phpstan-wordpress/extension.neon
	- vendor/dpanta94/phpstan-containers/extension.neon

parameters:
	phpVersion: 80000
	tmpDir: phpstan-cache
	parallel:
		jobSize: 10
		maximumNumberOfProcesses: 10
		minimumNumberOfJobsPerProcess: 2
		processTimeout: 600.0
	level: max
	reportUnmatchedIgnoredErrors: false
	treatPhpDocTypesAsCertain: false
	scanFiles:
	- %rootDir%/../../php-stubs/wordpress-stubs/wordpress-stubs.php
	- %rootDir%/../../php-stubs/wp-cli-stubs/wp-cli-stubs.php
	- %rootDir%/../../php-stubs/wp-cli-stubs/wp-cli-commands-stubs.php
	- %rootDir%/../../php-stubs/wp-cli-stubs/wp-cli-i18n-stubs.php
	- %rootDir%/../../php-stubs/wp-cli-stubs/wp-cli-tools-stubs.php

	scanDirectories:
		- vendor/

	# Paths to be analyzed.
	paths:
		- index.php
		- src

	excludePaths:
		analyseAndScan:
			- vendor/codeception/codeception/autoload.php
			- vendor/lucatume/wp-browser/includes/core-phpunit/includes/object-cache.php
			- vendor/lucatume/wp-browser/includes/pluggables
			- '**/node_modules/**'
